<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <title>Scrapbox Codeblock Generator</title>
  <style>
    .codeblock-container {
      display: flex;
      flex-direction: column;
      background: #f5f5f5;
      font-family: monospace;
    }

    .codeblock-start {
      padding: 0.1em;
      background-color: #ffcfc6;
      width: auto;
      text-decoration: underline;
    }

    #code {
      border: none;
      padding-left: 1em;
      background: transparent;
    }

    #code:focus {
      outline: none;
    }
  </style>
</head>

<body>
  <div class="codeblock-container">
    <div>
      <span class="codeblock-start">javascript</span>
    </div>
    <textarea cols="60" rows="30" id="code"></textarea>
  </div>
  <br>
  <button id="copy">Copy</button>
  <script>
    const $copyBtn = document.querySelector('#copy');
    const $code = document.querySelector('#code');
    $copyBtn.addEventListener('click', async () => {
      await navigator.clipboard.writeText(toCodeblock($code.value));
      $copyBtn.textContent = "Copied!";
      setTimeout(() => $copyBtn.textContent = "Copy", 1500);
    });

    function toCodeblock(code) {
      return `code:js\n  ${code.replaceAll(/\n/g, '\n  ')}`;
    }
  </script>
</body>

</html>